services:
  - type: pserv
    name: p2-database
    plan: free

  # Service: p2-backend
  - type: web
    name: p2-backend
    # üö® Adicionado runtime: docker para for√ßar a valida√ß√£o
    # Obs: Se isso falhar, tente a vers√£o SEM a linha abaixo
    runtime: docker 
    dockerContext: .
    dockerfilePath: Dockerfile
    autoDeploy: true
    plan: free
    envVars:
      - key: DATABASE_URL
        value: ${{ fromDatabase.p2-database.connectionString }}
      - key: NODE_ENV
        value: production

  # Service: p2-frontend
  - type: web
    name: p2-frontend
    runtime: docker # üö® Adicionado runtime: docker para for√ßar a valida√ß√£o
    dockerContext: ./frontend
    dockerfilePath: Dockerfile
    autoDeploy: true
    plan: free
    envVars:
      - key: VITE_API_URL
        value: ${{ fromService.p2-backend.defaultUrl }}